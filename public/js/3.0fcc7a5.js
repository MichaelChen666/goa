(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"3q1n":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"hHr LpR lFf"}},[n("q-layout-header",{staticClass:"no-shadow"},[n("q-toolbar",[n("img",{staticStyle:{width:"32px"},attrs:{src:"statics/logo.png"}}),n("q-toolbar-title",{staticClass:"col-auto q-mr-xl"},[t._v("\n        众越科技\n      ")]),n("q-tabs",{staticClass:"q-ml-xl col"},t._l(t.routeMenu,function(t){return n("q-route-tab",{attrs:{slot:"title",label:t.label,to:t.path,exact:""},slot:"title"})})),t.loginUser.hasOwnProperty("displayName")?n("q-btn-dropdown",{attrs:{label:t.profileTitle,"no-caps":"","no-wrap":"","no-ripple":"",flat:""}},[n("q-list",{attrs:{"no-border":"",link:""}},[n("q-item",{staticStyle:{"font-size":".8rem"},attrs:{to:"/setting"}},[n("q-item-main",[t._v("\n              应用设置\n            ")])],1),n("q-item",{staticStyle:{"font-size":".8rem"}},[n("q-item-main",{staticClass:"logout-a",attrs:{tag:"a",href:"/logout"}},[t._v("\n              退出系统\n            ")])],1)],1)],1):t._e(),t.$q.fullscreen.isCapable?n("q-btn",{attrs:{flat:"",dense:"",icon:t.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen"},on:{click:function(e){t.$q.fullscreen.toggle()}}}):t._e()],1)],1),n("q-page-container",[n("router-view")],1)],1)},s=[];i._withStripped=!0;n("rGqo");var r=n("N8Xa"),o=(n("pg2m"),{data:function(){return{leftDrawer:!1,routeMenu:[],isAdmin:!1,loginUser:{}}},created:function(){this.detectUser(),this.provideMenus()},watch:{isAdmin:"provideMenus"},computed:{profileTitle:function(){return this.loginUser.displayName+(this.isAdmin?"(管理员)":"")}},methods:{detectUser:function(){var t=this;this.$axios.get("/user/me").then(function(e){var n=e.data;n.hasOwnProperty("success")?console.warn("get user error: %s",n.msg):(t.loginUser=n,t.isAdmin=n.isAdmin||!1,t.isAdmin&&r["a"].set("isAdmin",!0))}).catch(function(t){console.error("get user error: %o",t)})},provideMenus:function(){var t=this;this.routeMenu=[];var e=this.$router.options.routes.filter(function(t){return"*"!==t.path});e.forEach(function(e){var n=e.children;void 0!==n&&n.length>0&&n.forEach(function(e){if(void 0!==e.meta){var n=e.meta;n.needAdmin?t.isAdmin&&t.routeMenu.push({label:n.title,path:e.path}):t.routeMenu.push({label:n.title,path:e.path})}})}),console.log("menus: %o",this.routeMenu)}}}),a=o,l=(n("mBH2"),n("KHd+")),u=Object(l["a"])(a,i,s,!1,null,"f473de0e",null);u.options.__file="AppLayout.vue";e["default"]=u.exports},P0Je:function(t,e,n){},mBH2:function(t,e,n){"use strict";var i=n("P0Je"),s=n.n(i);s.a}}]);